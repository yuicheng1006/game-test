<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />
    <!-- bootscrapt css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- local css -->
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div id="app">
      <div id="wrap">
        <!-- 電眼遊戲 -->
        <div class="scenes eye_game_wrap" v-show="isEyesGame">
          <div class="" v-show="isGameStart">
            <p>Game</p>
            <button class="btn_box" @click="startGame">Start</button>
            <button class="btn_box" @click="passGame">pass</button>
          </div>
          <div class="game_wrap" v-show="isGameDurning">
            <img
              class="actor_attacked"
              src="./image/bg/game.png"
              alt=""
              class="w-80"
            />
            <p>Game Starting</p>
            <div
              v-for="(el,index) in game.allImgs"
              :key="el"
              :class="`attack${el}`"
              @click="delImg(el)"
            >
              <img alt="" :src="randomImg()" class="girls_attack" />
            </div>
          </div>
          <div class="game_wrap" v-show="isFinalScore">
            <p>score:{{game.score}}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- bootscrapt js -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- typewriter.js -->
    <script
      src="https://unpkg.com/typewriter-effect@2.3.1/dist/core.js"
      crossorigin
    ></script>

    <!-- vue cdn -->
    <script type="module">
      import { createApp } from '/dist/vue.esm-browser.prod.js';

      createApp({
        data() {
          return {
            game: {
              count: 0, // 頭像數量
              imgList: [
                {
                  id: 'g1',
                  image:
                    'https://www.pngkit.com/png/full/373-3733909_cat-clipart-cute-cat-head-sticker.png',
                  point: 20,
                },
                {
                  id: 'g2',
                  image:
                    'https://www.pngmart.com/files/15/Clipart-Cat-Vector-PNG-Image.png',
                  point: 30,
                },
                {
                  id: 'g3',
                  image:
                    'https://creazilla-store.fra1.digitaloceanspaces.com/cliparts/19471/cartoon-black-cat-face-clipart-lg.png',
                  point: 40,
                },
              ],
              newAry: [],
              showImg: '',
              allImgs: [],
              score: 0, // 總分
              point: 0, // 點擊成功 point
              timer: 0, // 時間
            },
            isEyesGame: true,
            isGameStart: true,
            isGameDurning: false,
            isFinalScore: false,
          };
        },
        mounted() {
          // console.log('111', this.$refs.audio);
          this.$nextTick(() => {
            // this.$refs.audio.load();
          });
        },
        methods: {
          startGame() {
            const vm = this;
            vm.isGameStart = false;
            vm.isGameDurning = true;
            setTimeout(() => {
              alert('遊戲已結束');
              vm.isGameDurning = false;
              vm.isFinalScore = true;
              vm.game.score = vm.game.point;
            }, 30000);
          },
          delImg(val) {
            const vm = this;
            vm.game.allImgs.forEach((el) => {
              if (val === el) {
                vm.$nextTick(() => {
                  document.querySelector(`.attack${val}`).style.display =
                    'none';
                  vm.game.point++;
                  console.log('vm.game.point++', vm.game.point);
                });
              }
            });
          },
          randomImg() {
            const vm = this;
            let tempData = vm.game.imgList;
            for (var i = 0; i < 60; i++) {
              let index = parseInt(Math.random() * tempData.length);
              return tempData[index].image;
            }
          },
          passGame() {
            const vm = this;
            vm.stopType();
            vm.type(0, vm.storys.scenes_one.cut_five.comment);
            vm.isEyesGame = false;
            vm.isS1CutFive = true;
          },
        },
        created() {
          for (var i = 0; i < 60; i++) {
            this.game.allImgs.push(i);
          }

          const randomNum = ((arr) => {
            let i = arr.length;
            while (i) {
              let j = Math.floor(Math.random() * i--);
              [arr[j], arr[i]] = [arr[i], arr[j]];
            }
          })(this.game.allImgs);
          console.log('1111', { ...this.game.allImgs });
          this.randomImg();
        },
      }).mount('#app');
    </script>
  </body>
</html>
